ITT_SPY_MENP = 0
ITT_PATROL = 1
ITT_SPY_CHAOTING = 2
ITT_FANGHUO = 3
ITT_JIUHUO = 4
ITT_YUNBIAO = 5
ITT_JIEBIAO = 6
ITT_DUOSHU = 7
ITT_HUSHU = 8
ITT_BANGFEI = 9
ITT_XIASHI = 10
ITT_PATROL_CHAOTING = 11
ITT_SHOULEI = 12
ITT_DALEI = 13
ITT_BANGPAIZHAN = 14
ITT_BANGPAIZHAN_2 = 15
ITT_MENPAIZHAN = 16
ITT_MENPAIZHAN_2 = 17
ITT_ARREST = 18
ITT_WORLDLEITAI = 19
ITT_WORLDLEITAI_RANDOM = 20
ITT_SCHOOLMOOT = 21
ITT_TEAMFACULTY = 22
ITT_YUNBIAO_ACTIVE = 23
ITT_JHHJ = 24
ITT_HUASHAN_FIGHTER = 25
ITT_HUASHAN_LOOK = 26
ITT_WORLDWAR = 29
ITT_AVATAR = 30
ITT_SUPERBOOK = 31
ITT_WORLDBOSS = 32
ITT_MARRY_TASK = 33
ITT_ESCORT_SHENGZHU_GOLD = 34
ITT_TIGUAN_DANSHUA = 35
ITT_EGWAR = 36
ITT_MATCH_RIVERS = 37
ITT_MATCH_SCHOOL = 38
ITT_SCHOOL_DANCE = 39
ITT_QS_YANREN = 41
ITT_KILLER_ADV = 44
ITT_WEATHERWAR = 45
ITT_THD_PIKONGZHANG = 48
ITT_WORLDWAR_LXC = 56
ITT_BODYGUARDOFFICE_SSYB = 58
ITT_BODYGUARDOFFICE_DMXB = 59
ITT_BODYGUARDOFFICE_DBDH = 60
ITT_BODYGUARDOFFICE_DJZD = 64
ITT_KHD = 61
ITT_WORLDLEITAI_WUDOU = 70
ITT_CHANGFENG_GOTE = 71
ITT_CHANGFENG_SEIZE = 72
ITT_NEW_FANGHUO = 77
ITT_NLHH = 78
ITT_HUASHANSCHOOL_MEET = 80
ITT_SSG_PROBATION = 81
ITT_HUASHANSCHOOL_WXJZ = 85
ITT_ZJTX = 97
ITT_KH_TREASURE = 98
ITT_QIECUO = 99
ITT_TTLEITAI = 100
ITT_LIFE_JOB = 101
ITT_HOME_SYSTEM = 102
ITT_SHUZHUANGGE = 103
ITT_ZADAN_GIFT = 104
ITT_MARRY_SYSTEM = 105
ITT_JIEYI_SYSTEM = 106
ITT_JIANGHU_BATTLE = 107
ITT_MUSE_COUNTRY = 108
ITT_QINGYUNBU = 109
ITT_KONGQUE = 110
ITT_LONGMEN_HOTEL = 111
ITT_YANMENGUAN = 112
ITT_YINGOUFANG = 113
ITT_JINLINGBIAN = 114
ITT_QINGYAOGONG = 115
ITT_SCHOOL_KILL = 116
ITT_DESERT_DB = 117
ITT_BETRYARMY_ATTACK = 118
ITT_ANQI_KING = 119
ITT_JINLING_RS = 120
ITT_JINDI = 121
ITT_TC_ZZJ = 122
ITT_LUOYANG_DJ = 123
ITT_FIVEFAIRY_GLORY = 125
ITT_DAMO_PK = 128
ITT_DAMO_REPENT = 129
ITT_DMP_CONQUER_DEMON = 130
ITT_ACTIVE_ESCORT = 133
ITT_YEAR_BOSS_ACT = 134
ITT_OUTLAND_WAR = 135
ITT_STEAL_IN_GET_INTELLIGENCE = 136
ITT_STEAL_IN_SAVE_HOSTAGE = 137
ITT_SKY_HILL = 139
ITT_ERENGU_CHUANGGUAN = 140
ITT_DIG_TREASURE = 142
ITT_PROTECT_SCHOOL = 143
ITT_SCHOOL_COUNTER_ATTACK = 144
ITT_FF_ACTIVITY = 145
ITT_GARDEN = 146
ITT_GUILD_BOSS = 148
ITT_TEACH_EXAM = 149
ITT_BALANCE_WAR = 152
ITT_AGREE_WAR = 153
ITT_WUDAO_WAR = 154
ITT_LUAN_DOU = 155
ITT_TAOSHA = 157
ITT_GUILD_GLOBAL_WAR = 160
ITT_WUDAO_YANWU = 161
ITT_HORSE_RACE = 162
ITT_SJY_MEET = 163
ITT_SHENJI_DRILL = 164
ITT_MIDDLE_SPRING_HUNT = 165
ITT_YUBI_ACTIVITY = 166
ITT_SAN_HILL = 168
ITT_MAZE_HUNT_HILL = 169
ITT_XMG_MEET = 171
ITT_APEX = 172
ITT_NEW_SCHOOL_FIGHT = 173
ITT_ROGUE = 174
ITT_FLEE_IN_NIGHT = 175
ITT_COUNT = 176
SPECIAL_ITT_YANWU = 1001
SPECIAL_ITT_KUAIHUODAO = 1002
SPECIAL_ITT_JIANGHUJINDI = 1003
SPECIAL_ITT_SHITU = 1004
SPECIAL_ITT_JIAYUANXIULIAN = 1005
SPECIAL_ITT_JIANGHUSHILI = 1006
SPECIAL_ITT_SHIDASHIJIA = 1007
SPECIAL_ITT_JIANGHUSHASHOU = 1008
SPECIAL_ITT_SANMENGZHENGBA = 1009
SPECIAL_ITT_SHUANGRENLONGTOU = 1010
SPECIAL_ITT_WAIYUWULIN = 1011
SPECIAL_ITT_ZHUISHA = 1012
SPECIAL_ITT_BAGUATIANMENZHEN = 1013
SPECIAL_ITT_TONGTIANFU = 1014
SPECIAL_ITT_SIDASHIJIAZC = 1015
SPECIAL_ITT_DAZAOTAI = 1016
SPECIAL_ITT_ANHEIBAPAI_D = 1017
SPECIAL_ITT_ANHEIBAPAI_W = 1018
SPECIAL_ITT_GUISHI_D = 1019
SPECIAL_ITT_DUNRUYONGYE = 1020
SPECIAL_ITT_TUNFENGJUEZHAN = 1021
g_msg_base_info = 1
g_msg_player_list = 2
g_msg_update_playerinfo = 3
g_msg_update_notice = 4
g_msg_tvt_status_change = 5
g_msg_accept = 6
g_msg_giveup = 7
g_msg_submit = 8
g_msg_useskill = 9
g_msg_spyval = 10
g_msg_choose_snatch_target = 11
g_msg_accept_snatch_target = 12
g_msg_test_accept = 13
g_msg_school_request_book_info = 14
g_msg_school_result_book_info = 15
g_msg_request_confirm_res = 16
g_msg_call_patrol = 17
g_msg_weather_open = 18
g_msg_steal_in_findval = 19
g_msg_recommend_info = 20
g_msg_new_act_info = 21
PIS_ERROR = -1
PIS_NOSELECT = 0
PIS_ACTIVE = 1
PIS_CONDITION = 2
PIS_IN_GAME = 3
EAI_SUCCEED = 0
EAI_OTHER = 1
EAI_ERROR_TIME = 2
EAI_ERROR_WEEK = 3
EAI_ERROR_SCHOOL = 4
EAI_ERROR_CONDITION = 5
EAI_ERROR_MAX_TIMES = 6
EAI_ERROR_JOIN = 7
EAI_COOL_DOWN = 8
EAI_FRESH_MEN = 9
EAI_INARENA = 10
EAI_ERROR_GUILD = 11
EAI_ERROR_LEVEL = 12
TVT_SKILL_TOUDAO = "tvt_skill_toudao"
TVT_SKILL_TOUXI = "tvt_skill_touxi"
TVT_SKILL_GANGRAO = "tvt_skill_gangrao"
TVT_SKILL_SOUCHA = "tvt_skill_soucha"
TVT_SKILL_KDSOUCHA = "tvt_skill_kengdiesc"
TVT_SKILL_1 = "jn_sneakon_001"
TVT_SKILL_2 = "jn_sneakon_002"
TVT_SKILL_3 = "jn_sneakon_003"
TVT_SKILL_4 = "jn_sneakon_005"
TVT_SKILL_5 = "jn_sneakon_006"
function get_other_type(type)
  if type < ITT_SPY_MENP or type >= ITT_COUNT then
    return -1
  end
  local g_type_rl = {
    [ITT_SPY_MENP] = ITT_PATROL,
    [ITT_PATROL] = ITT_SPY_MENP,
    [ITT_SPY_CHAOTING] = ITT_PATROL_CHAOTING,
    [ITT_PATROL_CHAOTING] = ITT_SPY_CHAOTING,
    [ITT_FANGHUO] = ITT_JIUHUO,
    [ITT_JIUHUO] = ITT_FANGHUO,
    [ITT_YUNBIAO] = ITT_JIEBIAO,
    [ITT_JIEBIAO] = ITT_YUNBIAO,
    [ITT_DUOSHU] = ITT_HUSHU,
    [ITT_HUSHU] = ITT_DUOSHU,
    [ITT_BANGFEI] = ITT_XIASHI,
    [ITT_XIASHI] = ITT_BANGFEI,
    [ITT_SHOULEI] = ITT_DALEI,
    [ITT_DALEI] = ITT_SHOULEI
  }
  local other_type = g_type_rl[type]
  if other_type == nil then
    other_type = type
  end
  return other_type
end
function get_tvt_type(type)
  if type < ITT_SPY_MENP or type >= ITT_COUNT then
    return -1
  end
  local g_type_tvt = {
    [ITT_SPY_MENP] = ITT_SPY_MENP,
    [ITT_PATROL] = ITT_SPY_MENP,
    [ITT_SPY_CHAOTING] = ITT_SPY_CHAOTING,
    [ITT_PATROL_CHAOTING] = ITT_SPY_CHAOTING,
    [ITT_FANGHUO] = ITT_FANGHUO,
    [ITT_JIUHUO] = ITT_FANGHUO,
    [ITT_YUNBIAO] = ITT_YUNBIAO,
    [ITT_JIEBIAO] = ITT_YUNBIAO,
    [ITT_DUOSHU] = ITT_DUOSHU,
    [ITT_HUSHU] = ITT_DUOSHU,
    [ITT_BANGFEI] = ITT_BANGFEI,
    [ITT_XIASHI] = ITT_BANGFEI,
    [ITT_SHOULEI] = ITT_SHOULEI,
    [ITT_DALEI] = ITT_SHOULEI
  }
  local tvt_type = g_type_tvt[type]
  if tvt_type == nil then
    tvt_type = type
  end
  return tvt_type
end
function inter_sysinfo(strid, ...)
  local path = "form_stage_main\\form_main\\form_main_centerinfo"
  local SystemCenterInfo = nx_value("SystemCenterInfo")
  if nx_is_valid(SystemCenterInfo) then
    SystemCenterInfo:ShowSystemCenterInfo(util_format_string(strid, unpack(arg)), 2)
  end
end
function send_server_msg(subtype, ...)
  nx_execute("custom_sender", "custom_send_interact_msg", subtype, unpack(arg))
end
function get_real_type(type)
  if nx_number(type) == ITT_PATROL_CHAOTING then
    return ITT_PATROL
  end
  return type
end
function get_interact_status(type)
  local mgr = nx_value("InteractManager")
  if not nx_is_valid(mgr) then
    return -1
  end
  return mgr:GetInteractStatus(get_real_type(type))
end
function get_interact_base_info(type)
  local mgr = nx_value("InteractManager")
  if not nx_is_valid(mgr) then
    return {}
  end
  return util_split_string(mgr:GetBaseInfo(get_real_type(type)), ";")
end
function show_loading(form_name)
  nx_execute("form_stage_main\\form_interact\\form_loading", "show_loading", form_name)
end
function on_manager_init()
  local g_scene_school = {
    [5] = {
      mp = "school01",
      school = "school_jinyiwei"
    },
    [6] = {
      mp = "school02",
      school = "school_gaibang"
    },
    [7] = {
      mp = "school03",
      school = "school_junzitang"
    },
    [8] = {
      mp = "school04",
      school = "school_jilegu"
    },
    [9] = {
      mp = "school05",
      school = "school_tangmen"
    },
    [10] = {
      mp = "school06",
      school = "school_emei"
    },
    [11] = {
      mp = "school07",
      school = "school_wudang"
    },
    [12] = {
      mp = "school08",
      school = "school_shaolin"
    }
  }
  local str = ""
  for i, c in pairs(g_scene_school) do
    str = str .. nx_string(i) .. "," .. c.mp .. "," .. c.school .. ","
  end
  return str
end
function is_show_trace()
  local mgr = nx_value("InteractManager")
  local type = mgr:GetCurrentTvtType()
  return true
end
